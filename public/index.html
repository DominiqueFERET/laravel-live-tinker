<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>LiveTinker</title>
    <style type="text/css" media="screen">
        body {
            overflow: hidden;
        }

        #editor {
            margin: 0;
            position: absolute;
            top: 0;
            bottom: 0;
            left: 0;
            right: 0;
        }
    </style>
</head>
<body>

<pre id="editor">
$users = App\User::all();

foreach($users as $user) {
    echo $user->name;
}
</pre>

<script src="assets/js/ace/ace.js" type="text/javascript" charset="utf-8"></script>
<script>
    var editor = ace.edit("editor");
    var socket = new WebSocket("ws://0.0.0.0:2346");

    editor.session.setMode({path: "ace/mode/php", inline: true});

    socket.onmessage = function (data) {
        console.log(data.data);
    };

    editor.on("copy", function(text) {
        socket.send(editor.getValue())
    })
</script>

</body>
</html>
